# Navigation

**Navigation architecture Components Library makes it weasy for developers to navigate between screens. The trend is to have a single activity and multiple fragments. Activity will be the base and all the screens will be fragments.**

Three main components of Navigation architecture are:
1. Navigation graph

    Navigation graph is an XML resource file that contains all navigation-related information. This allows us to manage navigation related tasks from a single location.

2. NavHostFragment

    NavHostFragment is an empty container we keep on the activity to hold the navigation graph.

3. NavController
    
    NavController is a class generated by the navigation library to manage the navigation between destinations we added to the navigation graph.

---

1. Goto `app` > `build.gradle` > `android` and add the following:

```
android {
    ...
    buildFeatures {
        dataBinding true
    }
    ...
}
```

2. Goto https://developer.android.com/jetpack/androidx/releases/navigation#declaring_dependencies .

3. Add the following dependencies to `app` > `build.gradle` > `dependencies`. Change the version accordingly.

    ```
    def nav_version = "2.5.0"

    implementation("androidx.navigation:navigation-fragment-ktx:$nav_version")
    implementation("androidx.navigation:navigation-ui-ktx:$nav_version")
    ```

4. Add the following to `build.gradle`. Change the version accordingly.

    ```
    buildscript {
        repositories {
            google()
        }

        dependencies {
            def nav_version = "2.5.0"
            classpath("androidx.navigation:navigation-safe-args-gradle-plugin:$nav_version")
        }
    }
    ```

5. Add the following to `app` > `build.gradle` > `plugin`.

    ```
    id 'androidx.navigation.safeargs.kotlin'
    ```

6. Goto https://developer.android.com/jetpack/androidx/releases/lifecycle .

7. Add the following dependencies to `app` > `build.gradle` > `dependencies`. Change the version accordingly.

    ```
    def lifecycle_version = "2.6.0-alpha01"
    // ViewModel
    implementation "androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"
    // ViewModel utilities for Compose
    implementation "androidx.lifecycle:lifecycle-viewmodel-compose:$lifecycle_version"
    // LiveData
    implementation "androidx.lifecycle:lifecycle-livedata-ktx:$lifecycle_version"
    ```

8. Add the views to `app` > `src` > `main` > `res` > `layout` > `*.xml`.

9. Wrap everything in `activity_main.xml` except `<?xml version="1.0" encoding="utf-8"?>` inside `<layout></layout>`

10. Move the following from opening `<androidx.constraintlayout.widget.ConstraintLayout>` to opening `<layout>` tag.

    ```
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    ```

11. Right-click on `app` > `New` > `Android Resource File`.

12. Add `File name:` as `nav_graph`.

13. Select `Resource Type` as `Navigation`.

14. Goto `activity_main.xml` and switch to **Design** mode.

15. Remove whatever is in the activity.

16. From **Palette**, select `Containers` > `NavHostFragment`.

17. Drag and drop it on `activity_main.xml`.

18. Select the automatically detected `nav_graph` and click `Ok`.

19. Click on **Infer Contraints** button.

20. Goto `nav_graph.xml` and click on **New Destination**.

21. Click on **Create new destination**.

22. Select **Fragment (Blank)**. Click on **Next**.

23. Rename **BlankFragment** to **HomeFragment** and click on **Finish**.

24. Double-click on **HomeFragment** to open the `*.xml`.

25. Change `FrameLayout` to `ConstraintLayout`.

26. Add `layout` to `HomeFragment` similar to step 8.

27. Add binding related code to `HomeFragment`.

28. Create a second destination.

29. Add binding related code to `SecondFragment`.

7. Add a view model class that inherits `ViewModel`.

8. Add an init method and initialize the variable say `sum`.

9. Add the corresponding input variable say `input` and method to manipulate state.

10. Data type of state must be of type `MutableLiveData`.

11. Add `data` to `activity_main.xml` under `layout`.

12. Add the variable `name` and `type`.

13. Display the state value by accessing `sum` in `android:text` of `TextView`.

14. To edit the state value, take an input like `android:text="@={<viewmodel>.input}"` in `EditText`. **'='** is the important part here.

15. Add onClickListener to `Button` view in XML using `android:onClick` and map the lambda function to ViewModel function.

16. Binding for `activity_main.xml` will be `ActivityMainBinding`.

17. Add the corresponding bindings, viewModel in `app` > `src` > `main` > `java` > ... > `*.kt`.

18. Similarly, id for each view will be camelCased. `first_fragment` will be `firstFragment`.

19. Use the methods to manipulate state in the bindings. 